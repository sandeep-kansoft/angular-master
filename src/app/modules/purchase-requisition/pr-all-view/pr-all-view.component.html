<!----------------------->
<!----------------------->
<!-- Page Title starts -->
<!----------------------->
<!----------------------->
<div id="kt_app_toolbar" class="app-toolbar  py-3 py-lg-6 ">
    <!--begin::Toolbar container-->
    <div id="kt_app_toolbar_container" class="container-xxl d-flex flex-stack px-0">
       <!--begin::Page title-->
       <div class="page-title d-flex flex-column justify-content-center flex-wrap me-3 ">
          <!--begin::Title-->
          <h1 class="page-heading d-flex text-dark fw-bold fs-3 flex-column justify-content-center my-0">
             All PR
          </h1>
          <!--end::Title-->
       </div>
       <!--end::Page title-->
       <!--begin::Actions-->
       <div class="d-flex align-items-center gap-2 gap-lg-3">
          
         
          <!--begin::Primary button-->
          <!-- <a href="#" class="btn btn-sm fw-bold btn-primary" data-bs-toggle="modal" data-bs-target="#kt_modal_create_app">
          Create        </a> -->
          <!--end::Primary button-->
       </div>
       <!--end::Actions-->
    </div>
    <!--end::Toolbar container-->
 </div>

<!----------------------->
<!----------------------->
<!-- Page Title ends -->
<!----------------------->
<!----------------------->

<div class="card">
    
    <div class="card-body">
        <kendo-grid class="fixed-header" [loading]="isLoading" [columnMenu]="{ filter: true }" [groupable]="true"
            [data]="gridView" [group]="state.group" [filter]="state.filter" [filterable]="false" [reorderable]="true"
            [resizable]="true" [skip]="state.skip" [pageSize]="pageSize" [pageable]="true"
            (dataStateChange)="onStateChange($event)" [sortable]="{
    allowUnsort: true,           mode: 'multiple' }" [sort]="state.sort" (dataStateChange)="onStateChange($event)">
            <ng-template kendoGridToolbarTemplate>
                <div class="excel-export">
                    <button type="button" kendoGridExcelCommand class="btn btn-light-primary btn-sm" icon="file-excel">Export
                        to Excel</button>
                </div>
            </ng-template>
            <kendo-grid-column [filterable]="false" field="sno" title="SR NO" [width]="110" [headerClass]="headerStyle">
                <ng-template kendoGridCellTemplate let-rowIndex="rowIndex">
                    {{rowIndex+1}}
                </ng-template>
            </kendo-grid-column>
            <!-- <kendo-grid-command-column title="ACTIONS" [width]="110" [headerClass]="headerStyle">
                <ng-template kendoGridCellTemplate let-item>
                    <ng-container>
                        <div ngbDropdown autoClose="'outside'" container="body">
                            <button ngbDropdownToggle class="btn btn-sm btn cs-btn-light-primary py-1 px-1"
                                type="button" data-bs-auto-close="outside">
                                <i class="fa fa-cog"></i> Actions
                            </button>

                            <ul class="dropdown-menu" ngbDropdownMenu>
                                <li *ngFor="let value of dropdownListdata" ngbDropdownItem>
                                    <a (click)="onModelClick(value,item);" class="dropdown-item pt-0 pb-0 mt-0 mb-0">
                                        {{value}}
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </ng-container>
                </ng-template>
            </kendo-grid-command-column> -->
            <kendo-grid-command-column [headerClass]="headerStyle" title="ACTIONS" [width]="110">
                <ng-template kendoGridCellTemplate let-item>
                    <ng-container>
                        <div ngbDropdown autoClose="'outside'" container="body">
                            <button ngbDropdownToggle class="btn btn-sm cs-btn-outline-primary px-2 py-1" type="button"
                                data-bs-auto-close="outside">
                                <i class="fa fa-cog"></i> Actions
                            </button>

                            <ul class="dropdown-menu" ngbDropdownMenu>
                                <li *ngFor="let value of dropdownListdata" ngbDropdownItem>
                                    <a (click)="onModelClick(value,item);" class="dropdown-item pt-0 pb-0 mt-0 mb-0">
                                        {{value}}
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <!-- <button class="btn btn-sm fw-bold  btn-primary">Action</button> -->

                    </ng-container>
                </ng-template>
            </kendo-grid-command-column>

            <kendo-grid-command-column title="PR NO" [width]="150" field="PR No" [headerClass]="headerStyle">
                <ng-template kendoGridCellTemplate let-item>
                    <ng-container>
                        <a class="link-primary text-decoration-underline text-center"
                            (click)="onModelClick('Lines',item,true);">{{item['pR_NUM']}}
                        </a>

                    </ng-container>
                </ng-template>


            </kendo-grid-command-column>

            <kendo-grid-column title="STATUS" [width]="columnWidth" [headerClass]="headerStyle">
                <ng-template kendoGridCellTemplate let-item>
                    <ng-container>
                        <span [ngClass]="showBadgeStatusColorClass(item.buyerstatus)"
                            class="badge">{{item.buyerstatus}}</span>
                    </ng-container>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column title="description" [width]="columnWidth" [headerClass]="headerStyle">
                <ng-template kendoGridCellTemplate let-dataItem>
                    {{dataItem.description}}
                </ng-template></kendo-grid-column>
            <kendo-grid-column field="enterdate" title="CREATED DATE" [width]="columnWidth" [headerClass]="headerStyle">

            </kendo-grid-column>
            <kendo-grid-column field="siteName" title="SITE" [width]="columnWidth" [headerClass]="headerStyle">

            </kendo-grid-column>
            <kendo-grid-column field="projecT_NAME" title="PROJECT ID" [width]="columnWidth" [headerClass]="headerStyle">
                <ng-template kendoGridCellTemplate let-dataItem>
                    {{dataItem.description}}
                </ng-template></kendo-grid-column>
            <!-- <kendo-grid-column field="PROJECT_NAME" title="PROJECT ID" [width]="columnWidth"[headerClass]="headerStyle"></kendo-grid-column> -->
            <kendo-grid-column field="departmentName" title="DEPARTMENT" [width]="columnWidth"
                [headerClass]="headerStyle">

            </kendo-grid-column>
            <kendo-grid-column field="prtype" title="PR TYPE" [width]="columnWidth" [headerClass]="headerStyle">

            </kendo-grid-column>
            <kendo-grid-column field="prSubType" title="PRSUBTYPE" [width]="columnWidth" [headerClass]="headerStyle">
            </kendo-grid-column>
            <kendo-grid-column field="enterby" title="REQUESTED BY" [width]="columnWidth" [headerClass]="headerStyle">

            </kendo-grid-column>
            <kendo-grid-column field="totalValue" title="TOTAL VALUE" [width]="columnWidth" [headerClass]="headerStyle">

            </kendo-grid-column>
            <kendo-grid-column field="assignBuyer" title="ASSIGN TO" [width]="columnWidth" [headerClass]="headerStyle">

            </kendo-grid-column>

            <!-- <kendo-grid-column field="History" title="HISTORY" [width]="columnWidth"
                [headerClass]="headerStyle"></kendo-grid-column>
            <kendo-grid-excel pages fileName="PR.xlsx" [fetchData]="allData"></kendo-grid-excel> -->
        </kendo-grid>
    </div>
</div>



<div class="card" *ngIf="replytype==='2'">
    <div class="card-body">
        <div style="float:right; height: 25px; padding-left: 15px; ">
            <button type="button" style="background-color: red; border-radius: 5px;" (click)="backbutton()">
                <i class="bi bi-x" style='font-size:20px;'></i>
            </button>
        </div>
        <kendo-grid [groupable]="true" [data]="lineviewdata" [group]="state.group" [filter]="state.filter"
            [filterable]="true" [reorderable]="true" [resizable]="true" [skip]="state.skip" [pageSize]="pageSize"
            [pageable]="true" (dataStateChange)="onStateChange($event)" [sortable]="{
        allowUnsort: true,
        mode: 'multiple'}" [sort]="state.sort" (dataStateChange)="onStateChange($event)">
            <kendo-grid-column [filterable]="false" field="sno" title="SR NO" [width]="70">
                <ng-template kendoGridCellTemplate let-rowIndex="rowIndex">
                    {{rowIndex+1}}
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-command-column title="ACTION" [width]="150">
                <ng-template kendoGridCellTemplate let-item>
                    <ng-container ngbDropdown #myDrop="ngbDropdown">
                        <div ngbDropdown autoClose="'outside'" container="body">
                            <button ngbDropdownToggle class="btn btn-sm fw-bold  btn-primary dropdown-toggle"
                                type="button">ACTIONS </button>
                            <ul class="dropdown-menu" ngbDropdownMenu>
                                <li *ngFor="let value of dropdownListdata" ngbDropdownItem>
                                    <a (click)="dropDownMenuClickHandler(value,item); myDrop.close();"
                                        class="dropdown-item pt-0 pb-0 mt-0 mb-0">
                                        {{value}}
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <!-- <button class="btn btn-sm fw-bold  btn-primary">Action</button> -->

                    </ng-container>
                </ng-template>


            </kendo-grid-command-column>
            <kendo-grid-column field="PR No" title="PR NO" [width]="columnWidth"></kendo-grid-column>
            <kendo-grid-column field="PR Description" title="PR DESCRIPTION" [width]="columnWidth"></kendo-grid-column>
            <kendo-grid-column field="Created Date" title="CREATED DATE" [width]="columnWidth"></kendo-grid-column>
            <kendo-grid-column field="Site" title="SITE" [width]="columnWidth"></kendo-grid-column>
            <kendo-grid-column field="Project ID" title="PROJECT ID" [width]="columnWidth"></kendo-grid-column>
            <!-- <kendo-grid-column field="PROJECT_NAME" title="PROJECT ID" [width]="columnWidth"></kendo-grid-column> -->
            <kendo-grid-column field="Department" title="DEPARTMENT" [width]="columnWidth"></kendo-grid-column>
            <kendo-grid-column field="PR Type" title="PR TYPE" [width]="columnWidth"> </kendo-grid-column>
            <kendo-grid-column field="PR Sub Type" title="PRSUBTYPE" [width]="columnWidth"> </kendo-grid-column>
            <kendo-grid-column field="Requested By" title="REQUESTED BY" [width]="columnWidth"></kendo-grid-column>
            <kendo-grid-column field="Total Value" title="TOTAL VALUE" [width]="columnWidth"></kendo-grid-column>
            <kendo-grid-column field="Assign To" title="ASSIGN TO" [width]="columnWidth"></kendo-grid-column>
            <kendo-grid-column field="Status" title="STATUS" [width]="columnWidth"></kendo-grid-column>
            <kendo-grid-column field="History" title="HISTORY" [width]="columnWidth"></kendo-grid-column>

        </kendo-grid>
    </div>
</div>














<div class="modal bg-white fade" tabindex="-1" id="kt_modal_2">
    <div class="modal-dialog modal-fullscreen p-9">
        <div class="modal-content shadow-none">
            <div class="modal-header">
                <h5 class="modal-title">PR Line Item for PR :PR23014419</h5>

                <!--begin::Close-->
                <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal"
                    aria-label="Close">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
                </div>
                <!--end::Close-->
            </div>

            <div class="modal-body">
                <app-pr-modal-view></app-pr-modal-view>
            </div>
        </div>
    </div>
</div>